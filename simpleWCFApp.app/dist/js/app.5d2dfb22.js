webpackJsonp([1],{0:function(e,t,n){e.exports=n("NHnr")},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,u=n("/5sW"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("router-view")],1)},s=[],i=n("XyMi"),o=null,l=!1,c=null,p=null,m=null,f=Object(i["a"])(o,a,s,l,c,p,m),d=f.exports,h=n("/ocq"),v=n("fKPv"),b=n.n(v),g=n("NYxO");u["default"].use(g["a"]);var w=new g["a"].Store({state:{token:null,users:[]},mutations:(r={},b()(r,"SET_TOKEN",function(e,t){e.token=t}),b()(r,"SET_USERS",function(e,t){e.users=t}),r),actions:{}}),x=n("Biqn"),y=n.n(x),k=(n("SldL"),n("7hDC")),E=n.n(k),_=n("Z60a"),R=n.n(_),N=n("C9uT"),O=n.n(N),$=n("mtWM"),U=n.n($),S=U.a.create({baseURL:"http://192.168.42.53/ws/User.svc/"}),j=function(){function e(){R()(this,e)}return O()(e,[{key:"init",value:function(e){return S.defaults.headers.Authorization=e,this}},{key:"loadUsers",value:function(){var e=E()(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S.get("/users");case 2:t=e.sent,n=t.data.items,w.commit("SET_USERS",n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=E()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S.delete(t.url);case 2:return e.next=4,this.loadUsers();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=E()(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=y()({},t,{id:null}),e.next=3,S.post("/users",{user:n});case 3:return e.next=5,this.loadUsers();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"upgrade",value:function(){var e=E()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S.put(t.url,{user:t});case 2:return e.next=4,this.loadUsers();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=E()(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S.get("/users/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),T=new j,L={computed:Object(g["b"])(["users"]),methods:{remove:function(e){T.remove(this.users[e])},goTo:function(e){this.$router.push({name:"userEdit",params:{id:this.users[e].id}})}}},D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){t.preventDefault(),e.$router.push({name:"userAdd"})}}}),n("el-table",{attrs:{data:e.users}},[n("el-table-column",{attrs:{prop:"id",label:"#id"}}),n("el-table-column",{attrs:{prop:"userName",label:"UserName"}}),n("el-table-column",{attrs:{prop:"login",label:"Login"}}),n("el-table-column",{attrs:{fixed:"right",label:"Operations",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(n){n.preventDefault(),e.goTo(t.$index)}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){n.preventDefault(),e.remove(t.$index)}}})]}}])})],1)],1)},C=[],q=!1,A=null,B=null,K=null,M=Object(i["a"])(L,D,C,q,A,B,K),P=M.exports,z={props:{isEditing:{type:Boolean,default:!0},user:{type:Object}},methods:{submit:function(){var e=E()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==this.isEditing){e.next=5;break}return e.next=3,T.add(this.user);case 3:e.next=7;break;case 5:return e.next=7,T.upgrade(this.user);case 7:this.$router.back();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{nativeOn:{submit:function(t){t.preventDefault(),e.submit()}}},[n("el-form-item",{attrs:{label:"Username"}},[n("el-input",{attrs:{type:"text"},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),n("el-form-item",{attrs:{label:"Login"}},[n("el-input",{attrs:{type:"text"},model:{value:e.user.login,callback:function(t){e.$set(e.user,"login",t)},expression:"user.login"}})],1),!1===e.isEditing?n("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("\n        Create\n    ")]):n("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("\n        Save\n    ")])],1)},W=[],Z=!1,J=null,V=null,X=null,Y=Object(i["a"])(z,H,W,Z,J,V,X),F=Y.exports,G={data:function(){return{user:{userName:""}}},components:{user:F}},I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("user",{attrs:{isEditing:!1,user:e.user}})},Q=[],ee=!1,te=null,ne=null,re=null,ue=Object(i["a"])(G,I,Q,ee,te,ne,re),ae=ue.exports,se={data:function(){return{user:null}},components:{user:F},created:function(){var e=E()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.get(this.$route.params.id);case 2:this.user=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("user",{attrs:{isEditing:!0,user:e.user}}):e._e()},oe=[],le=!1,ce=null,pe=null,me=null,fe=Object(i["a"])(se,ie,oe,le,ce,pe,me),de=fe.exports,he=(n("VjuZ"),U.a.create({baseURL:"http://192.168.42.53/ws/User.svc/"})),ve=function(){function e(){R()(this,e)}return O()(e,[{key:"authenticate",value:function(){var e=E()(regeneratorRuntime.mark(function e(t,n){var r,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,he.post("auth",{login:t,password:n});case 2:r=e.sent,u=r.data,w.commit("SET_TOKEN",u),Ae.replace({name:"home"}),T.init(u).loadUsers();case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),be=new ve,ge={data:function(){return{userName:"user01",password:"123456789"}},methods:{submit:function(){var e=E()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,be.authenticate(this.userName,this.password);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{nativeOn:{submit:function(t){t.preventDefault(),e.submit()}}},[n("el-form-item",{attrs:{label:"Username"}},[n("el-input",{attrs:{type:"text"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),n("el-form-item",{attrs:{label:"Password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("\n        Login\n    ")])],1)},xe=[],ye=!1,ke=null,Ee=null,_e=null,Re=Object(i["a"])(ge,we,xe,ye,ke,Ee,_e),Ne=Re.exports,Oe={components:{login:Ne}},$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-auth"},[n("login")],1)},Ue=[],Se=!1,je=null,Te=null,Le=null,De=Object(i["a"])(Oe,$e,Ue,Se,je,Te,Le),Ce=De.exports;u["default"].use(h["a"]);var qe=new h["a"]({routes:[{path:"/",name:"home",component:P,beforeEnter:function(e,t,n){if(null===w.state.token)return n({name:"login"});n()}},{path:"/create",name:"userAdd",component:ae,beforeEnter:function(e,t,n){if(null===w.state.token)return n({name:"login"});n()}},{path:"/:id",name:"userEdit",component:de,beforeEnter:function(e,t,n){if(null===w.state.token)return n({name:"login"});n()}},{path:"/login",name:"login",component:Ce}],scrollBehavior:function(e,t,n){}}),Ae=qe,Be=n("zL8q"),Ke=n.n(Be);n("tvR6");u["default"].config.productionTip=!1,u["default"].use(Ke.a),new u["default"]({router:Ae,store:w,render:function(e){return e(d)}}).$mount("#app")},tvR6:function(e,t){}},[0]);
//# sourceMappingURL=app.5d2dfb22.js.map